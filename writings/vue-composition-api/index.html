<!DOCTYPE html><html  data-capo=""><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>深入理解Vue 3 Composition API</title>
<link rel="stylesheet" href="/_nuxt/entry.KpOxUC9H.css">
<link rel="stylesheet" href="/_nuxt/ProsePre.CchFRBtv.css">
<link rel="preload" as="fetch" crossorigin="anonymous" href="/writings/vue-composition-api/_payload.json?6d42dd24-2693-4d6b-96f3-a480b59006c7">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CImj5B26.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CNaCoGnj.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/M_sE3ne-.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Khncc53c.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ZrvUQgo7.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/eQJK268_.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DysEEKkk.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BiO1ZoyC.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DRf_zh2p.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/1Rzj7pPC.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/FPFtfMFH.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C-v3KzvZ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dnd51l0P.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BsX1iXqC.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BW8d7sG2.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CF43fYy4.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BgRWt9oy.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DKGEiDkx.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/5HslohOJ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dbc3H9yc.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ChyjciUu.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BWEiwjvR.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BRUMMzNF.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/x4qaF6nK.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CyhXKywF.js">
<link rel="prefetch" as="style" crossorigin href="/_nuxt/useStudio.BCHA6tPf.css">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/ChuuBnUh.js">
<link rel="prefetch" as="style" crossorigin href="/_nuxt/error-404.D_7ViYPH.css">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/DYNZBtfM.js">
<link rel="prefetch" as="style" crossorigin href="/_nuxt/error-500.QDhyycSX.css">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/DyGUk4Ay.js">
<meta property="og:title" content="深入理解Vue 3 Composition API">
<meta name="description" content="探索Vue 3 Composition API的强大功能和使用方法">
<meta property="og:description" content="探索Vue 3 Composition API的强大功能和使用方法">
<script type="module" src="/_nuxt/CImj5B26.js" crossorigin></script><script>"use strict";(()=>{const t=window,e=document.documentElement,c=["dark","light"],n=getStorageValue("localStorage","nuxt-color-mode")||"system";let i=n==="system"?u():n;const r=e.getAttribute("data-color-mode-forced");r&&(i=r),l(i),t["__NUXT_COLOR_MODE__"]={preference:n,value:i,getColorScheme:u,addColorScheme:l,removeColorScheme:d};function l(o){const s=""+o+"",a="";e.classList?e.classList.add(s):e.className+=" "+s,a&&e.setAttribute("data-"+a,o)}function d(o){const s=""+o+"",a="";e.classList?e.classList.remove(s):e.className=e.className.replace(new RegExp(s,"g"),""),a&&e.removeAttribute("data-"+a)}function f(o){return t.matchMedia("(prefers-color-scheme"+o+")")}function u(){if(t.matchMedia&&f("").media!=="not all"){for(const o of c)if(f(":"+o).matches)return o}return"light"}})();function getStorageValue(t,e){switch(t){case"localStorage":return window.localStorage.getItem(e);case"sessionStorage":return window.sessionStorage.getItem(e);case"cookie":return getCookie(e);default:return null}}function getCookie(t){const c=("; "+window.document.cookie).split("; "+t+"=");if(c.length===2)return c.pop()?.split(";").shift()}</script></head><body><div id="__nuxt"><div><header class="sticky top-0 z-40 bg-background/80 backdrop-blur-lg"><div class="h-14 max-w-screen-2xl flex items-center justify-between gap-2 px-4 container md:px-8"><div class="flex"><span class="ml-3 self-center font-bold"> Shawn&#39;s blog </span></div><nav class="flex items-center space-x-4 lg:space-x-6"><!--[--><a href="/writings" class="text-sm text-muted-foreground font-medium transition-colors hover:text-primary">Writings</a><!--]--></nav><div class="flex gap-2"><!--[--><!--[--><!--[--><!--[--><!--[--><button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10" data-state="closed" data-grace-area-trigger><!--[--><span aria-hidden="true" class="i-lucide-moon h-5 w-5"></span><span class="sr-only">Switch dark mode</span><!--]--></button><!----><!--]--><!--]--><!--]--><!--]--><!--]--></div></div></header><div class="min-h-screen border-b container"><!--[--><main><!--[--><article class="mx-auto text-base prose prose-truegray xl:text-xl dark:prose-invert"><h1>深入理解Vue 3 Composition API</h1><div><h1 id="深入理解vue-3-composition-api"><!--[-->深入理解Vue 3 Composition API<!--]--></h1><p><!--[-->Vue 3的发布带来了许多激动人心的新特性,其中最引人注目的莫过于Composition API。这个新的API为我们提供了一种更灵活、更强大的方式来组织和重用组件逻辑。本文将深入探讨Composition API的核心概念、使用方法以及它如何改变我们的Vue开发体验。<!--]--></p><h2 id="什么是composition-api"><a href="#什么是composition-api"><!--[-->什么是Composition API?<!--]--></a></h2><p><!--[-->Composition API是Vue 3引入的一个新的API集合,旨在解决Vue 2中Options API的一些限制。它允许我们使用导入的API函数来描述组件逻辑,而不是依赖于预定义的组件选项。这种方法提供了更好的代码组织、逻辑重用和类型推断。<!--]--></p><h2 id="为什么需要composition-api"><a href="#为什么需要composition-api"><!--[-->为什么需要Composition API?<!--]--></a></h2><p><!--[-->在大型复杂的应用中,Options API可能会导致组件变得难以理解和维护。相关的逻辑可能分散在不同的选项中,使得代码难以追踪和重构。Composition API通过允许我们按照逻辑关系组织代码,解决了这个问题。<!--]--></p><h2 id="setup函数composition-api的入口"><a href="#setup函数composition-api的入口"><!--[-->setup函数:Composition API的入口<!--]--></a></h2><p><!--[--><code class=""><!--[-->setup<!--]--></code>函数是Composition API的核心。它在组件创建之前执行,作为组合逻辑的入口点。在<code class=""><!--[-->setup<!--]--></code>中,我们可以定义响应式状态、计算属性、方法等,并将它们返回以供模板使用。<!--]--></p><h3 id="setup函数的基本结构"><a href="#setup函数的基本结构"><!--[-->setup函数的基本结构<!--]--></a></h3><!--[--><pre class="language-vue" style=""><!--[--><code>&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;Count: {{ count }}&lt;/p&gt;
    &lt;p&gt;Double Count: {{ doubleCount }}&lt;/p&gt;
    &lt;button @click=&quot;increment&quot;&gt;
      Increment
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { computed, onMounted, ref } from &#39;vue&#39;
// 响应式状态
const count = ref(0)
// 计算属性
const doubleCount = computed(() =&gt; count.value, 2)
// 方法
const increment = () =&gt; {
  count.value++
}
// 生命周期钩子
onMounted(() =&gt; {
  console.log(&#39;组件已挂载&#39;)
})
&lt;/script&gt;
</code><!--]--></pre><!--]--><h2 id="响应式系统的核心ref和reactive"><a href="#响应式系统的核心ref和reactive"><!--[-->响应式系统的核心:ref和reactive<!--]--></a></h2><p><!--[-->Composition API引入了两个主要的响应式API:<code class=""><!--[-->ref<!--]--></code>和<code class=""><!--[-->reactive<!--]--></code>。<!--]--></p><h3 id="ref"><a href="#ref"><!--[-->ref<!--]--></a></h3><p><!--[--><code class=""><!--[-->ref<!--]--></code>用于创建一个响应式的引用,可以包含任何类型的值<!--]--></p><!--[--><pre class="language-javascript" style=""><!--[--><code>import { ref } from &#39;vue&#39;
const count = ref(0)
console.log(count.value) // 0
count.value++
console.log(count.value) // 1
</code><!--]--></pre><!--]--><h3 id="reactive"><a href="#reactive"><!--[-->reactive<!--]--></a></h3><p><!--[--><code class=""><!--[-->reactive<!--]--></code>用于创建一个响应式对象,可以包含多个属性<!--]--></p><!--[--><pre class="language-javascript" style=""><!--[--><code>import { reactive } from &#39;vue&#39;
const state = reactive({ count: 0 })
console.log(state.count) // 0
state.count++
</code><!--]--></pre><!--]--><h2 id="计算属性和监听器"><a href="#计算属性和监听器"><!--[-->计算属性和监听器<!--]--></a></h2><h3 id="计算属性"><a href="#计算属性"><!--[-->计算属性<!--]--></a></h3><p><!--[-->计算属性是根据其他响应式状态计算得出的值。它们在模板中使用,但不会在响应式数据流中引入新的响应式状态。<!--]--></p><!--[--><pre class="language-javascript" style=""><!--[--><code>import { computed, ref } from &#39;vue&#39;
const count = ref(0)
const doubleCount = computed(() =&gt; count.value, 2)
console.log(doubleCount.value) // 0
count.value++
console.log(doubleCount.value) // 2
</code><!--]--></pre><!--]--><h3 id="监听器"><a href="#监听器"><!--[-->监听器<!--]--></a></h3><p><!--[-->监听器用于监听响应式状态的变化,并在变化时执行某些操作。<!--]--></p></div></article><!--]--></main><!--]--></div><footer class="py-6 text-muted-foreground md:px-8 md:py-0"><div class="flex-between gap-2 container md:h-24"><span class="text-sm"> © 2024 Shawn Liu. All rights reserved. </span><div class="flex gap-2"><!--[--><button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10"><!--[--><a href="https://github.com/iuiao7/iuiao7.me" rel="noopener noreferrer" target="_blank" class="i-lucide-github h-5 w-5"></a><!--]--></button><!--]--></div></div></footer></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/writings/vue-composition-api/_payload.json?6d42dd24-2693-4d6b-96f3-a480b59006c7">[{"state":1,"once":7,"_errors":8,"serverRendered":5,"path":11,"prerenderedAt":12},["Reactive",2],{"$scolor-mode":3},{"preference":4,"value":4,"unknown":5,"forced":6},"system",true,false,["Set"],["ShallowReactive",9],{"navigation":10,"content-query-zxkcZIdG9J":10},null,"/writings/vue-composition-api",1727429945215]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{mdc:{components:{prose:true,map:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},content:{locales:[],defaultLocale:"",integrity:1727429925213,experimental:{stripQueryParameters:false,advanceQuery:false,clientDB:false},respectPathCase:false,api:{baseURL:"/api/_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:false,wsUrl:"",documentDriven:false,host:"",trailingSlash:false,search:"",contentHead:true,anchorLinks:{depth:4,exclude:[1]}},studio:{apiURL:"https://api.nuxt.studio",iframeMessagingAllowedOrigins:""}},app:{baseURL:"/",buildId:"6d42dd24-2693-4d6b-96f3-a480b59006c7",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>